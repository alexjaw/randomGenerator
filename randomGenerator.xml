<?xml version="1.0" encoding="utf-8"?>
<project xmlns="http://www.plcopen.org/xml/tc6_0200">
  <fileHeader companyName="" productName="CODESYS" productVersion="CODESYS V3.5 SP4 Patch 3" creationDateTime="2015-02-05T18:21:50.255309" />
  <contentHeader name="bilfabriken.project" modificationDateTime="2015-02-05T17:25:27.6708362">
    <coordinateInfo>
      <fbd>
        <scaling x="1" y="1" />
      </fbd>
      <ld>
        <scaling x="1" y="1" />
      </ld>
      <sfc>
        <scaling x="1" y="1" />
      </sfc>
    </coordinateInfo>
    <addData>
      <data name="http://www.3s-software.com/plcopenxml/projectinformation" handleUnknown="implementation">
        <ProjectInformation />
      </data>
    </addData>
  </contentHeader>
  <types>
    <dataTypes />
    <pous>
      <pou name="rand" pouType="function">
        <interface>
          <returnType>
            <UINT />
          </returnType>
          <inputVars>
            <variable name="lower">
              <type>
                <UINT />
              </type>
            </variable>
            <variable name="upper">
              <type>
                <UINT />
              </type>
            </variable>
          </inputVars>
          <localVars>
            <variable name="range">
              <type>
                <UINT />
              </type>
              <initialValue>
                <simpleValue value="((upper - lower) + 1)" />
              </initialValue>
            </variable>
            <variable name="interval">
              <type>
                <UINT />
              </type>
              <initialValue>
                <simpleValue value="(c4 / range)" />
              </initialValue>
            </variable>
            <variable name="preRand">
              <type>
                <UINT />
              </type>
            </variable>
          </localVars>
          <localVars constant="true">
            <variable name="c1">
              <type>
                <UDINT />
              </type>
              <initialValue>
                <simpleValue value="1103515245" />
              </initialValue>
            </variable>
            <variable name="c2">
              <type>
                <UINT />
              </type>
              <initialValue>
                <simpleValue value="12345" />
              </initialValue>
            </variable>
            <variable name="c3">
              <type>
                <UDINT />
              </type>
              <initialValue>
                <simpleValue value="65536" />
              </initialValue>
            </variable>
            <variable name="c4">
              <type>
                <UINT />
              </type>
              <initialValue>
                <simpleValue value="32768" />
              </initialValue>
            </variable>
          </localVars>
          <documentation>
            <xhtml xmlns="http://www.w3.org/1999/xhtml">Exempel: Generera slumptal mellan 1 ooch 10. 
randNext : ULINT := 42;
x : uint := rand(1,10)
Ger ett slumptal mellan lower och upper
Kräver att man har definierat en variabel randNext:ULINT:=&lt;ett frö&gt;;
Ref: Bilting, U. Vägen Till C. Studentlitteratur. 2011.</xhtml>
          </documentation>
        </interface>
        <body>
          <ST>
            <xhtml xmlns="http://www.w3.org/1999/xhtml">randNext := randNext * c1 + c2;
preRand := ULINT_TO_UINT((randNext/c3) MOD c4);
IF interval &gt; 0 THEN
	rand := (preRand+lower*interval-1)/interval; 
ELSE
	rand := preRand;
END_IF;
RETURN;</xhtml>
          </ST>
        </body>
        <addData />
      </pou>
      <pou name="TestRand" pouType="program">
        <interface>
          <localVars>
            <variable name="randNext">
              <type>
                <ULINT />
              </type>
              <initialValue>
                <simpleValue value="42" />
              </initialValue>
            </variable>
            <variable name="x">
              <type>
                <UINT />
              </type>
            </variable>
          </localVars>
        </interface>
        <body>
          <ST>
            <xhtml xmlns="http://www.w3.org/1999/xhtml">x := rand(1,10);</xhtml>
          </ST>
        </body>
        <addData />
      </pou>
    </pous>
  </types>
  <instances>
    <configurations />
  </instances>
  <addData>
    <data name="http://www.3s-software.com/plcopenxml/projectstructure" handleUnknown="discard">
      <ProjectStructure>
        <Folder Name="Rand">
          <Object Name="rand" />
          <Object Name="TestRand" />
        </Folder>
      </ProjectStructure>
    </data>
  </addData>
</project>